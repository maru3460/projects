<!DOCTYPE html>
<html lang="ja" xmlns:th="www.thymeleaf.org">
  <head>
    <meta charset="utf-8">
    <meta name="description" content="Session Test">
    <meta name="viewport" content="wide=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://unpkg.com/ress/dist/ress.min.css">
    <link rel="stylesheet" href="/css/style.css">
    <title>Programs</title>
  </head>

  <body>
    <div th:insert="~{fragment :: common-header}"></div>
            
    <main>
      <section id="scraping-gihyo" class="wrapper">
        
        <p>やっていること</p>
        <p>・ProcessBuilderでpython実行</p>
        <p>・pythonでスクレイピング、データをファイルに保存</p>
        <p>・javaでそのデータを受け取る</p>
        <p>・htmlに渡して表示</p>
        
        <div th:if="${userSession.ifExistGihyoBooksData()}">
          <div class="book-datas" th:each="data : ${userSession.getGihyoBooksData()}">
            
            <img th:src="${data.get(2)}" width="50" height="75"/>
           <p><a th:href="${data.get(1)}" th:text="${data.get(0)}"></a></p>
            
          </div>
        </div>
        
        <form action="/home/py_scraping/fetch" method="post"><button class="user-btn" type="submit">データを取ってくる</button> </form>
        <p>時間がかかります</p>
                          
      </section>
    </main>    
  </body>

</html>